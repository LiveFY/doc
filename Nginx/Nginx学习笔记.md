Nginx最大作用：将多个web容器整合在一起使用。（使用Nginx间接访问tomcat）

**1.负载均衡** <br/>
    一个nginx将代理多个Tomcat服务器，形成一个Tomcat集群存在。<br/>

主要作用：<br/>
    ① 中间的路由，转换请求到tomcat服务器,配置多个路径，而后nginx会根据负载量自动分配，可在配置文件对各个服务器配置相应的权重。
    ② 将一些静态的数据进行缓存在nginx对应服务器，减少资源浪费。同时提供缓存清除机制。
    ③ 提供ip_hash支持，可以提供session控制。此时如果用户通过nginx访问到一个tomcat服务器之后，则只能在一台tomcat主机上处理。
    

**2.session管理** <br/>
① 利用nginx提供的ip_hash支持，但只能在单台tomcat保存，此时仅仅只是将用户绑定在一台主机上。
② 可采用将session数据（内容是map集合）保存到一个公共的空间上，所有的tomcat通过此公共空间进行读取。
  此时可以利用redis进行session的管理，在tomcat的server.xml文件上配置，追加session管理机制（把session发送到redis服务对应的主机上）。
  
 
**3.HA机制**  <br/>
nginx核心思想：利用nginx反向代理多个tomcat。如果nginx出现了问题，则所有的web容器将无法访问。
如果利用nginx进行HA的配置，那么必须保证两台的nginx配置相同，并且不应该同时进行服务，当有一台主机出现了问题，另外一台主机应该在很短的时间内恢复使用。
此时可以利用keepalived组件（可以避免IP单点故障）。
> keepalived最大功能：采用了一个虚拟路由算法，虚拟出一个新的IP地址，而后利用这个IP地址代理多个真实服务器。<br/>

> keepalived是一个基于VRRP协议来实现的服务高可用方案。VRRP全称虚拟路由冗余协议，可以实现路由器高可用的容错协议，即将N台提供相同公共的路由器组成一个路由器组，这个组里面有一个master和多个backup，但在外界看来就像一台一样，构成虚拟路由器。拥有一个虚拟IP，在master宕机之后其他的backup主机可以自动恢复使用。

**4.NFS**  <br/>
**问题：我们要把war包放到webapp下，但是此时tomcat服务器数量比较多,如何处理?**  <br/>
在整个的Java Web中我们会将war包上传到tomcat之中进行自动的项目部署，是因为该文件可以上传到webapps目录下， 而这个目录属于热部署目录，会自动的将*.war文件进行解压缩，而后自动的部署到整个的web容器上。<br/>
此时可以采用一种最为简单的方式，利用linux下的NFS网络文件系统机制实现所有数据文件的自动同步。 <br/>

NFS:网络文件系统。可以通过网络让不同的机器、不同的操作系统彼此分享个别的数据，让应用程序在客户端通过网络访问位于服务器磁盘中的数据，是在类Unix系统间实现磁盘文件共享的一种方法。
> 使用了NFS机制之后，所有的目录中的内容可以达到一个自动的同步处理，如果现在主机数量很多，NFS就是一个很小巧的选择了。